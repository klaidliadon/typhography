[Metadata]
Name=System
Author=Alex Guerrieri <klaidliadon@gmail.com>
Information=Displays info about the system.
License=Creative Commons
Version=1.0.0

@Include=../common.ini

[_User]
Measure=Plugin
Plugin=SysInfo
SysInfoType=USER_NAME
UpdateDivider=-1

[_Host]
Measure=Plugin
Plugin=SysInfo
SysInfoType=HOST_NAME
UpdateDivider=-1

[_OSVersion]
Measure=Plugin
Plugin=SysInfo
SysInfoType=OS_VERSION
UpdateDivider=-1

[_OSBits]
Measure=Plugin
Plugin=SysInfo
SysInfoType=OS_BITS 
UpdateDivider=-1

[_IP]
Measure=Plugin
Plugin=SysInfo
SysInfoType=IP_ADDRESS 
SysInfoData=Best

[_MaxTemp]
Measure=Plugin
Plugin=CoreTemp
CoreTempType=MaxTemperature
UpdateDivider=10

[_CpuSpeed]
Measure=Plugin
Plugin=CoreTemp
CoreTempType=CpuSpeed
UpdateDivider=10

[_CheckNetwork]
Measure=Plugin
Plugin=SysInfo
SysInfoType=INTERNET_CONNECTIVITY
SysInfoData=Best
OnChangeAction=[!CommandMeasure _Loc "Update"][!CommandMeasure _City "Update"]

[_WAN]
Measure=WebParser
URL="https://www.iplocationtools.com/"
RegExp="(?siU)IP Address Location Lookup -\s+([0-9\.]*)<\/strong>.*<div><label><strong>City<\/strong><\/label><\/div>\s+([^\s].*)\s+<div>.*<strong>Weather Station<\/strong><\/label><\/div>[^\(]*\(([^\)]*)\)"
StringIndex=1
FinishAction=[!SetOption MeterIP Text "%1 [\x2022] WAN: %2"]

[_City]
Measure=WebParser
URL=[_WAN]
StringIndex=2

[_Loc]
Measure=WebParser
URL=[_WAN]
StringIndex=3
OnChangeAction=[!CommandMeasure _WeatherTemp "Update"]

[_WeatherTemp]
Group=Weather
Measure=WebParser
UpdateRate=900
DynamicVariables=1
Url="http://wxdata.weather.com/wxdata/weather/local/[&_Loc]?cc=*&unit=#Unit#&dayf=1"
RegExp="(?siU).*<tmp>([\-0-9]+)<\/tmp>\s+<flik>([\-0-9]+)<\/flik>\s+<t>(.*)<\/t>.*<hi>(.*)<\/hi>\s+\s+<low>(.*)<\/low>"
StringIndex=1
OnRegExpErrorAction=[!SetOption MeterWeather Text "-"]
FinishAction=[!SetOption MeterWeather Text "%1 [\x2022] %2, %3[\x00B0]C ([\x2193] %4[\x00B0] [\x2191] %5[\x00B0])"]

[_WeatherFlik]
Group=Weather
Measure=WebParser
UpdateRate=900
Url=[_WeatherTemp]
StringIndex=2

[_WeatherCond]
Group=Weather
Measure=WebParser
Url=[_WeatherTemp]
StringIndex=3

[_WeatherTempHi]
Group=Weather
Measure=WebParser
Url=[_WeatherTemp]
StringIndex=4

[_WeatherTempLo]
Group=Weather
Measure=WebParser
Url=[_WeatherTemp]
StringIndex=5


[_system]
StringAlign=Right
FontSize=#FONTSIZE#
X=0r
Y=(-2.0*#FONTSIZE#)r

[_first]
X=(#WORKAREAWIDTH#)-#SPACING#
Y=(#WORKAREAHEIGHT# - #FONTSIZE# - #SPACING#)

[_spaced]
Y=(-3.00*#FONTSIZE#)r

[MeterIP]
Meter=String
MeterStyle=_system | _style | _first
MeasureName=_IP
MeasureName2=_WAN
Prefix= "IP Address: "
Text=%1
LeftMouseUpAction=["control.exe" "/name" "Microsoft.NetworkAndSharingCenter"]

[MeterCPU]
Meter=String
MeterStyle=_system | _style | _darker
MeasureName=_MaxTemp
MeasureName2=_CpuSpeed
Text="Temp: %1 [\x00B0]C [\x2022] Freq: %2 MHz"

[MeterWeather]
Meter=String
MeterStyle=_system | _style | _spaced
MeasureName=_City
MeasureName2=_WeatherCond
MeasureName3=_WeatherTemp
MeasureName4=_WeatherTempLo
MeasureName5=_WeatherTempHi
DynamicVariables=1
LeftMouseUpAction="msnweather:"

[MeterOS]
Meter=String
MeterStyle=_system | _style | _darker | _spaced
StringStyle=Italic
MeasureName=_OSVersion
MeasureName2=_OSBits
Text="%1 x%2"
LeftMouseUpAction="ms-settings:about"

[MeterUser]
Meter=String
MeterStyle=_system | _style
MeasureName=_User
MeasureName2=_Host
StringCase=Proper
FontSize=(1.50*#FONTSIZE#)
Text="%1@%2"
X=5r
Y=(-2.75*#FONTSIZE#)r
LeftMouseUpAction="ms-settings:yourinfo"